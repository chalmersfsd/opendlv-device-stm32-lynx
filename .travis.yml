os: linux
language: cpp
sudo: required
branches:
  only:
  - "/^test.*$/"
  - "/^v[0-9].*$/"
services:
- docker
addons:
  apt:
    update: true
env:
  global:
  - DOCKERHUB='chalmersfsd'
  - IMAGE=`echo ${TRAVIS_REPO_SLUG#*/}`
  - secure: TRXCzMYYQeK9UPkqQTEDv4usZn/KqRvdYInQ2gn4j80JD3vFouhscrFr9UrzmCKyHcAL4gft29v+K740vi0wXH196xclQdu3avtTF2jAd/+bPRTfy4+W9d92QrQANOBH7ZtNmh6qIz/RFB88ibVcEMQbqb9wQP0QO5QZCUDHFepjtTuwp+tJBkBRP3WZg8MWae7WmZxT7iuqQAk9ddab9SOuvETMer5b/5PfR0LhiE6X9U+Ms4Djn3PfvHGNwpBRo61WjFQcS26NcZcg9EeAVgaRDvi2sljVV8hTE3VI4queoi9LKq5pe2+B3Rhj/idIWAUXrgVYFt1nW4DvC0yRnBrbdKrVFpxgf3sQnR6peBHA0hcVS/qncZn6u7ldwZfXDh36Jw9GMO4xIcZGq4qfH2/a06pbjmBJNNyXOxCgwHr6PDb+h9IjfQe+NNOaipu52UX2+GAFPFwXKdJ1ufEo9rTbFLeOhIbYCSFLGuWEeV00NoG0YVou/b11EwYjSUToZHgcFk3NGBKa0Q8K7Vq1Qe+GZ8ptE4dICln1y5dQxoijHXzt9MVJaOZD8DIVNvHuZKXbZrQOEv9afYKhZOpJxJgPlfql7oWACOJO2QbkamQamvaZzUESDwnhqTfp4kGDD1lExML2Q9ZOoyHmzOFAMofzDv2K2sruOh9X8S3HfQU=
  - secure: f84Jjs36erlKC2bo4RVt39KQtHXxv0Y/CXUEMEOQdvgFqLbGgAzlp9vWwcHkZmNBMgKoKC+VOqOygScbm8Sj3/yO1AaaCr6VexXU0lcVLQh4PUdOugCNgTILo5A+T7f2kxPlTq6F0fC9o0mizE7HvDMSI9dO2XnaJhHgw73rdPMYZNDpZouSVfjl4/BhYwhCsLkM67ACSSTnIkMVH9pDN1oDMMfNJXxmZnPRmEkUx7O1AAhReCl4dwPl4+iAL8OIur2kh+hyMItgQIW/CvDnhHIAtW0+a+t5bql0yNjGWdek1O5Q3EEocorzSrSaBhCzVzdNrGUQ71KD/MW4aEElOSWvielw2n2yFO9Epyuo/IDAMxLfvHQivCu6KRMTRtbYFMRZEvbZnGaQ7TIGOqYDhLZhVtdFtoZdgV2gzLfxnlAijPcvsqp1WduQ6M92CI5cRWxKRuJgA5JlXbGg2P16mHphyu7h8NJCHRN1L7uWq04eOrpmO66Tu0Je0NDEaDNSYRMXCy7vrCiORuO9l/Xq4vxdvcHR5ejduDtlGWzU1d8WkS6rfi8TYVXM/iuTo7CDeukf7vlcfusUimtlSpOiH+W0fd+AhoDX8miPpgJH317FolLiTCC6C8kLWmk/KknoXieS0+llpfGWgRiIQ8LPGamh+6knJskDIQ6pyGGOROc=
install:
- docker build -f Dockerfile.amd64 -t ${IMAGE} .
script: skip
after_success:
- echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
- if [[ "${TRAVIS_BRANCH}" == *test* ]]; then docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER};
  docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}; echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}";
  else docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}; docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH};
  echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}"; fi
notifications:
  email:
    on_success: never
    on_failure: never
